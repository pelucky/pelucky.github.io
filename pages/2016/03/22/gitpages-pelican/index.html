<!DOCTYPE html>
<html lang="zh"
>
<head>
    <title>Pelican札记 - pelucky's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="https://pelucky.github.io/extra/favicon.ico" rel="icon">

<link rel="canonical" href="https://pelucky.github.io/pages/2016/03/22/gitpages-pelican/">

        <meta name="author" content="pel" />
        <meta name="keywords" content="git,pelican,jekyll" />
        <meta name="description" content="这篇主要是总结下折腾个人博客的经验，前人已经刷了无数攻略，这个副本并不难，只是需要花时间。遇到问题时，Google始终是你最好的老师... 0x01 Requirement ..." />

        <meta property="og:site_name" content="pelucky's blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Pelican札记"/>
        <meta property="og:url" content="https://pelucky.github.io/pages/2016/03/22/gitpages-pelican/"/>
        <meta property="og:description" content="这篇主要是总结下折腾个人博客的经验，前人已经刷了无数攻略，这个副本并不难，只是需要花时间。遇到问题时，Google始终是你最好的老师... 0x01 Requirement ..."/>
        <meta property="article:published_time" content="2016-03-22" />
            <meta property="article:section" content="System" />
            <meta property="article:tag" content="git" />
            <meta property="article:tag" content="pelican" />
            <meta property="article:tag" content="jekyll" />
            <meta property="article:author" content="pel" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://pelucky.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://pelucky.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://pelucky.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link href="https://pelucky.github.io/theme/tipuesearch/tipuesearch.css" rel="stylesheet">
    <link rel="stylesheet" href="https://pelucky.github.io/theme/css/style.css" type="text/css"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://pelucky.github.io/" class="navbar-brand">
pelucky's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><span>
                <form class="navbar-search" action="/search">
                  <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input" required>
                </form></span>
              </li>
              <li><a href="https://pelucky.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="https://pelucky.github.io" title="pelucky's blog"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://pelucky.github.io/categories/system.html" title="System">System</a></li>
                <li class="active">Pelican札记</li>
            </ol>

    <section id="content">
        <article>
           <header class="page-header">
                <h1>
                    <a href="https://pelucky.github.io/pages/2016/03/22/gitpages-pelican/"
                       rel="bookmark"
                       title="Permalink to Pelican札记">
                        Pelican札记
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-03-22T10:13:00+08:00"> Tue 22 March 2016</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="https://pelucky.github.io/tag/git.html">git</a>
        /
	<a href="https://pelucky.github.io/tag/pelican.html">pelican</a>
        /
	<a href="https://pelucky.github.io/tag/jekyll.html">jekyll</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                    <div id="toc"><ul><li><a class="toc-href" href="#" title="Pelican札记">Pelican札记</a><ul><li><a class="toc-href" href="#0x01-requirement" title="0x01 Requirement">0x01 Requirement</a></li><li><a class="toc-href" href="#0x02-solution" title="0x02 Solution">0x02 Solution</a></li><li><a class="toc-href" href="#0x03-pelican" title="0x03 Pelican">0x03 Pelican</a><ul><li><a class="toc-href" href="#1introduce" title="1.Introduce">1.Introduce</a></li><li><a class="toc-href" href="#2setup" title="2.Setup">2.Setup</a></li><li><a class="toc-href" href="#3usage" title="3.Usage">3.Usage</a><ul><li><a class="toc-href" href="#azhan-dian-jie-gou" title="a.站点结构">a.站点结构</a></li><li><a class="toc-href" href="#bwen-dang-nei-rong" title="b.文档内容">b.文档内容</a></li><li><a class="toc-href" href="#cshu-chu-he-qi-dong" title="c.输出和启动">c.输出和启动</a></li><li><a class="toc-href" href="#dpei-zhi-zhu-ti" title="d.配置主题">d.配置主题</a></li><li><a class="toc-href" href="#epei-zhi-cha-jian" title="e.配置插件">e.配置插件</a><ul><li><a class="toc-href" href="#sitemap" title="sitemap">sitemap</a></li><li><a class="toc-href" href="#tag_cloud" title="tag_cloud">tag_cloud</a></li><li><a class="toc-href" href="#pelican-toc" title="pelican-toc">pelican-toc</a></li></ul></li><li><a class="toc-href" href="#fgoogle-analytics_1" title="f.Google Analytics">f.Google Analytics</a></li><li><a class="toc-href" href="#gyi-jian-github" title="g.一键Github">g.一键Github</a></li><li><a class="toc-href" href="#hqu-xiao-dai-ma-zhong-hong-kuang" title="h.取消代码中红框">h.取消代码中红框</a></li><li><a class="toc-href" href="#iping-lun-xi-tong" title="i.评论系统">i.评论系统</a></li><li><a class="toc-href" href="#jcha-ru-tu-pian" title="j.插入图片">j.插入图片</a></li><li><a class="toc-href" href="#kshe-zhi-yu-ming" title="k.设置域名">k.设置域名</a></li><li><a class="toc-href" href="#lzhan-nei-sou-suo" title="l.站内搜索">l.站内搜索</a></li><li><a class="toc-href" href="#mcong-wordpressqian-yi-dao-pelican" title="m.从WordPress迁移到Pelican">m.从WordPress迁移到Pelican</a></li><li><a class="toc-href" href="#nurlpei-zhi" title="n.URL配置">n.URL配置</a></li><li><a class="toc-href" href="#ogeng-huan-zi-ti" title="o.更换字体">o.更换字体</a></li></ul></li></ul></li><li><a class="toc-href" href="#reference_2" title="Reference">Reference</a></li></ul></li></ul></div>
                <hr>
                <p>这篇主要是总结下折腾<strong>个人博客</strong>的经验，前人已经刷了无数攻略，这个副本并不难，只是需要花时间。遇到问题时，Google始终是你最好的老师...</p>
<h1 id="0x01-requirement">0x01 Requirement</h1>
<ul>
<li>搭建简单，维护备份方便</li>
<li>写博客方便，支持MD格式</li>
<li>模板美观大方，可以装B，不会丑的狗带</li>
<li>社区活跃，遇到问题可以抱大神大腿</li>
</ul>
<h1 id="0x02-solution">0x02 Solution</h1>
<p>主要是三大类解决方案：</p>
<p>a. 商业化产品</p>
<ul>
<li>Lofter</li>
<li>CSDN</li>
</ul>
<p>b. 个人博客（CMS）</p>
<ul>
<li>Wordpress</li>
<li>Durpal</li>
</ul>
<p>c. 静态页面</p>
<ul>
<li>Pelican</li>
<li>jekyll</li>
<li>Ortopress</li>
</ul>
<blockquote>
<ul>
<li>商业化产品首先不考虑，服务受提供商制约，用户体验有待提高，备份也很头疼，且没有折腾的意义...</li>
<li>使用过Wordpress，需要数据库等后面一套，略庞大，肯定需要独立空间，我懒...</li>
</ul>
</blockquote>
<p>自从<a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html">搭建一个免费的，无限流量的Blog----github Pages和Jekyll入门</a>之后，国内的个人博客就如雨后春笋，资料大把，原理类似...</p>
<p><a href="https://staticsitegenerators.net/">Static Site Generators</a>记录了github中各个开源的静态网站生成器star的情况，排名前五的是jekyll(Ruby)、Octopress(Ruby)、Hexo(Javascript)、Hugo(Go)、Pelican(Python)</p>
<ul>
<li>Jekyll
Jekyll在Github上有20000+stars，远远领先于第二名的关注度，笔者没用过ruby，且国内ruby源被GFWfuck后，设置淘宝源各种蛋疼...遂放弃</li>
<li>Ortopress同理，但是看到别人做的效果挺好的就关注了下：<a href="http://sonnewilling.com/">陋室</a></li>
</ul>
<h1 id="0x03-pelican">0x03 Pelican</h1>
<p>笔者使用Python，并且之前接触过Pelican，考虑了一下就选择了最熟悉的Pelican,毕竟它叫<strong>Pel I Can</strong>...</p>
<h2 id="1introduce">1.Introduce</h2>
<ul>
<li>pelican是一个用python生成的静态站点生成器。具有以下特点：</li>
<li>支持Markdown和reStructuredText格式；</li>
<li>可以使用简单的命令生成文件；</li>
<li>具有简单易用的版本控制系统；</li>
<li>完全静态，可在任何地方输出；</li>
</ul>
<h2 id="2setup">2.Setup</h2>
<p>安装pelican</p>
<div class="highlight"><pre>pip install pelican Markdown
</pre></div>
<p>如有印刷格式上的需要，还需要安装typogrify</p>
<div class="highlight"><pre>pip install typogrify
</pre></div>
<h2 id="3usage">3.Usage</h2>
<ul>
<li>pelican-quickstart创建站点到/var/www/pelican/，根据脚本提示配置参数</li>
</ul>
<h3 id="azhan-dian-jie-gou">a.站点结构</h3>
<div class="highlight"><pre>yourproject/
├── content
│   └── (pages)
├── output
├── develop_server.sh
├── fabfile.py
├── Makefile
├── pelicanconf.py       # Main settings file
└── publishconf.py       # Settings to use when ready to publish
</pre></div>
<h3 id="bwen-dang-nei-rong">b.文档内容</h3>
<ul>
<li>pelican支持三种格式：reStructuredText、markdown以及AsciiDoc</li>
</ul>
<p>reStructuredText要求文件后缀为.rst，并且源文件格式如下：</p>
<div class="highlight"><pre>My super title
##############

:date: 2010-10-03 10:20
:modified: 2010-10-04 18:40
:tags: thats, awesome
:category: yeah
:slug: my-super-post
:authors: Alexis Metaireau, Conan Doyle
:summary: Short version for index and feeds

This is the content of my super blog post.
</pre></div>
<p>Markdown要求文件后缀为.md, .markdown, .mkd, 或 .mdown，并且源文件格式如下：</p>
<div class="highlight"><pre><span class="n">Title</span><span class="o">:</span> <span class="n">My</span> <span class="kd">super</span> <span class="n">title</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">03</span> <span class="mi">10</span><span class="o">:</span><span class="mi">20</span>
<span class="n">Modified</span><span class="o">:</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">19</span><span class="o">:</span><span class="mi">30</span>
<span class="n">Category</span><span class="o">:</span> <span class="n">Python</span>
<span class="n">Tags</span><span class="o">:</span> <span class="n">pelican</span><span class="o">,</span> <span class="n">publishing</span>
<span class="n">Slug</span><span class="o">:</span> <span class="n">my</span><span class="o">-</span><span class="kd">super</span><span class="o">-</span><span class="n">post</span>
<span class="n">Authors</span><span class="o">:</span> <span class="n">Alexis</span> <span class="n">Metaireau</span><span class="o">,</span> <span class="n">Conan</span> <span class="n">Doyle</span>
<span class="n">Summary</span><span class="o">:</span> <span class="n">Short</span> <span class="n">version</span> <span class="k">for</span> <span class="n">index</span> <span class="n">and</span> <span class="n">feeds</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">my</span> <span class="kd">super</span> <span class="n">blog</span> <span class="n">post</span><span class="o">.</span>
</pre></div>
<p>还支持翻译、语法高亮、内置内容（模板）、从其他站点导入等功能；</p>
<h3 id="cshu-chu-he-qi-dong">c.输出和启动</h3>
<ul>
<li>编辑好Markdown或reStructuredText文件后，pelican会将内容转换为静态html格式，输出到output中</li>
</ul>
<div class="highlight"><pre>pelican /path/to/your/content/ [-s path/to/your/settings.py]
</pre></div>
<ul>
<li>启动服务器</li>
</ul>
<div class="highlight"><pre>cd output
python -m SimpleHTTPServer      #python2
python -m http.server           #python3
</pre></div>
<ul>
<li>打开浏览器http://192.168.1.112:8000/，预览效果；</li>
</ul>
<h3 id="dpei-zhi-zhu-ti">d.配置主题</h3>
<p>Pelican支持大量的开源主题，GitHub上的pelican-themes项目有几十套主题，大部分都带了效果预览图。可以从里面挑一个喜欢的主题样式来使用。还有一个更方便的挑选主题的方式，直接打开<a href="www.pelicanthemes.com">pelicanthemes</a>挑选（加载略慢）。一个网页里就列出了几乎所有的主题。该博客使用pelican-bootstrap3主题，并在这套主题的基础上进行了一些定制。选定好喜欢的主题后，从GitHub上下载下来所有的主题，安装主题：</p>
<div class="highlight"><pre>mkdir pelican
cd pelican
git clone https://github.com/getpelican/pelican-themes.git
pelican-themes -i pelican-bootstrap3
</pre></div>
<p>然后在pelicanconf.py里通过下面代码指定博客主题：</p>
<div class="highlight"><pre>THEME = 'pelican-bootstrap3'
</pre></div>
<p>通常的做法是，选中一个自己喜欢的主题后，会进行一些定制。Pelican使用Jinja2来配置主题。一个主题的典型结构如下：</p>
<div class="highlight"><pre>├── static
│   ├── css
│   └── images
└── templates
    ├── analytics.html      // 这是Google Analytics的代码
    ├── archives.html       // 这个是博客归档页面的模板
    ├── article.html        // 这个是博客正文的显示模板
    ├── base.html           //　这个是所有页面的父类模板，即所有页面都引用这个页面。比如网页导航栏啊之类的，都定义在这里
    ├── categories.html     //　所有博客文章的分类列表
    ├── category.html       // 某个博客分类的文章列表模板
    ├── index.html          // 主页
    ├── page.html           // 分页显示的模板
    ├── tag.html            // 某类标签下的文章列表
    └── tags.html           // 所有的标签列表页面模板
</pre></div>
<p>稍微有点Jinja的知识加上一些HTML和CSS的知识，就可以自己定义主题了。</p>
<h3 id="epei-zhi-cha-jian">e.配置插件</h3>
<p>插件同主题类似，到github上down下来,虽然大部分插件都是全主题可用的,但是也存在好用与否的问题, 有些插件在原生主题上就需要自己改base.css才能用,所以尽量配套选,避免麻烦.</p>
<div class="highlight"><pre>git clone --recursive https://github.com/getpelican/pelican-plugins
</pre></div>
<p>将需要安装的插件添加到pelicanconf.py文件中，新版本将关键字改为PLUFIN_PATHS以及列表的形式。</p>
<div class="highlight"><pre>PLUGIN_PATHS = [u"pelican-plugins"]
PLUGINS = [u"sitemap", u"tag_cloud", u"gzip_cache", u"related_posts", u"tipue_search", u"pelican-toc"]
</pre></div>
<p>tag_cloud, related_posts, gzip_cache参考手册设置即可</p>
<h4 id="sitemap">sitemap</h4>
<p>Pelican的sitemap插件可以导出站点地图，Google Webmaster是Google的站长工具，方便Google收录博客：</p>
<p>a. 在pelicanconf.py中添加sitemap，同时别忘了设置SITEURL，否则生成的sitemap.xml不正确</p>
<div class="highlight"><pre>SITEURL = u'https://pelucky.github.io'

SITEMAP = {
    "format": "xml",
    "priorities": {
        "articles": 0.7,
        "indexes": 0.5,
        "pages": 0.3,
    },
    "changefreqs": {
        "articles": "monthly",
        "indexes": "daily",
        "pages": "monthly",
    }
}
</pre></div>
<p>b. 登录<a href="https://www.google.com/webmasters">Google Webmasters</a>,注册博客并测试sitemap，测试通过后提交，过段时间就可以查看Google已经收录了博客。</p>
<ul>
<li>
<p>亦可以选择&ldquo;Google抓取方式&rdquo;，手动提交索引；抓取的结果在&ldquo;抓取统计信息&rdquo;页面中查看，参考<a href="https://support.google.com/webmasters/answer/96568#2">关于我们的统计信息和数据</a></p>
</li>
<li>
<p>对于sitemap不熟悉的可以参考Google提供的<a href="https://support.google.com/webmasters/answer/183668">创建和提交站点地图</a></p>
</li>
<li>
<p>同样可以添加robots.txt用于告知Google抓取的内容，参考<a href="https://support.google.com/webmasters/answer/6062608?hl=zh-Hans">了解 robots.txt 文件</a></p>
</li>
</ul>
<h4 id="tag_cloud">tag_cloud</h4>
<p>这个应该是必装的，否则右侧tag选项永远显示为空，在pelicanconf.py中添加：</p>
<div class="highlight"><pre>DISPLAY_TAGS_ON_SIDEBAR = True
TAGS_URL = "tags.html"
tag_cloud = True
</pre></div>
<h4 id="pelican-toc">pelican-toc</h4>
<p>添加Table of Contents，即可显示文章的目录，需要自行下载到pelican-plugins，参考<a href="https://github.com/ingwinlu/pelican-toc">pelican-toc</a>，自带的extract_toc没这个方便...</p>
<p>在配置文件中添加：</p>
<div class="highlight"><pre>PLUGINS = ['pelican-toc']

TOC = {
    'TOC_HEADERS' : '^h[1-6]',  # What headers should be included in the generated toc
                                # Expected format is a regular expression

    'TOC_RUN'     : 'true'      # Default value for toc generation, if it does not evaluate
                                # to 'true' no toc will be generated
}
</pre></div>
<p>在模板文件中添加，可以添加到文章最上面或(article.html)sidebar处：</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.toc</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span><span class="nv">article.toc</span><span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
<h3 id="fgoogle-analytics_1">f.Google Analytics</h3>
<p>去<a href="https://www.google.com/analytics/">Google Analytics</a>申请账号，会要求检验你拥有该站点的所有权，需要下载googlexxxx.html，上传并点击该链接来确认。记下跟踪ID。 在pelicanconf.py添加</p>
<div class="highlight"><pre>GOOGLE_ANALYTICS = u'跟踪ID'
</pre></div>
<p>之后即可到Google Analytics的控制台查看访问情况；</p>
<h3 id="gyi-jian-github">g.一键Github</h3>
<p>若要一键上传到Github，需要修改Makefile脚本两处地方：</p>
<div class="highlight"><pre><span class="nf">publish</span><span class="o">:</span>
<span class="k">$(</span><span class="nv">PELICAN</span><span class="k">)</span> <span class="k">$(</span><span class="nv">INPUTDIR</span><span class="k">)</span> <span class="err">-o</span> <span class="k">$(</span><span class="nv">OUTPUTDIR</span><span class="k">)</span> <span class="err">-s</span> <span class="k">$(</span><span class="nv">CONFFILE</span><span class="k">)</span> <span class="k">$(</span><span class="nv">PELICANOPTS</span><span class="k">)</span>

<span class="err">......</span>

<span class="nf">github</span><span class="o">:</span> <span class="n">publish</span>
<span class="err">cd</span> <span class="k">$(</span><span class="nv">OUTPUTDIR</span><span class="k">)</span> <span class="err">;</span> <span class="err">git</span> <span class="err">add</span> <span class="err">.</span> <span class="err">;</span>  <span class="err">git</span> <span class="err">commit</span> <span class="err">-am</span> <span class="s1">'Update pages'</span> <span class="err">;</span> <span class="err">git</span> <span class="err">push</span>
</pre></div>
<p>以后写完文章在Pelican目录下执行make github就可以一键部署了。</p>
<h3 id="hqu-xiao-dai-ma-zhong-hong-kuang">h.取消代码中红框</h3>
<p>参考：<a href="http://allotory.github.io/posts/2014/09/08/fix-code-err/">修复pelican代码中红框</a></p>
<p>在使用Markdown的代码块时，如果代码中有汉字或者按规定书写错误的代码，则生成的HTML文件中错误的代码会有红框框住，output/theme/pygment.css文件中定义了该样式，注释或者删除掉。</p>
<div class="highlight"><pre><span class="na">.err</span> <span class="err">{</span>
<span class="nl">border:</span><span class="err">1</span><span class="nf">px</span> <span class="no">solid</span> <span class="c">#FF0000;</span>
<span class="err">}</span>
</pre></div>
<p>由于output中的内容每次都会生成，故需要把模板中的pygment.css进行更换，如果之前使用了
<code>pelican-themes -i pelican-bootstrap</code>安装，则一般会在如下位置，直接vim修改模板中的pygment.css：</p>
<div class="highlight"><pre>pel@debian:~/pelican$ pelican-themes -p
/usr/local/lib/python2.7/dist-packages/pelican/themes
</pre></div>
<h3 id="iping-lun-xi-tong">i.评论系统</h3>
<p>在<a href="https://disqus.com/admin/signup">Disqus</a>上申请一个站点，记牢Shortname(不需要加后缀)，评论系统加载起来有点慢，国内也可以使用多说。 在pelicanconf.py添加</p>
<div class="highlight"><pre>DISQUS_SITENAME = 'Shortname'
</pre></div>
<h3 id="jcha-ru-tu-pian">j.插入图片</h3>
<p>有两种方法:</p>
<ul>
<li>一种是使用云存储，设置为公开图片，直接链接过来，如<a href="https://picasaweb.google.com/home">Picasa</a>来维护图片,推荐使用云图床；</li>
</ul>
<div class="highlight"><pre>![Test Cloud img](https://lh3.googleusercontent.com/-rBvjY3F2wEU/VvD3yZ9T-1I/AAAAAAAAAVc/LsPcb3CIxtomUcXq5aVKj27qSrI4OserwCCo/s400-Ic42/3d94dcb44aed2e730566c2068601a18b86d6fa7f.jpg)
</pre></div>
<p><img alt="Test Cloud img" src="https://lh3.googleusercontent.com/-rBvjY3F2wEU/VvD3yZ9T-1I/AAAAAAAAAVc/LsPcb3CIxtomUcXq5aVKj27qSrI4OserwCCo/s400-Ic42/3d94dcb44aed2e730566c2068601a18b86d6fa7f.jpg"/></p>
<ul>
<li>另一种使用本地图片，<a href="http://docs.getpelican.com/en/3.6.3/content.html#linking-to-static-files">参考</a>,但Github有图片容量限制。content目录下建立一个 images目录 然后在 pelicanconf.py 中添加:</li>
</ul>
<div class="highlight"><pre>STATIC_PATHS = ["images"]
</pre></div>
<p>在文章中引用图片,路径要设置为本文件与图片文件中的相对路径，如果文件路径变更了，就需要修改图片的相对路径，那个真蠢...可<a href="http://stackoverflow.com/questions/21892913/editing-markdown-files-with-images-for-pelican-site">参考</a>：</p>
<div class="highlight"><pre><span class="o">!</span><span class="p">[</span><span class="n">Test</span> <span class="n">img</span><span class="p">](..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">test</span><span class="p">.</span><span class="n">jpg</span><span class="p">)</span>
</pre></div>
<p><img alt="Test img" src="../../../../../../images/test.jpg"/></p>
<h3 id="kshe-zhi-yu-ming">k.设置域名</h3>
<p>待续...</p>
<h3 id="lzhan-nei-sou-suo">l.站内搜索</h3>
<p>站内搜索有两种解决方案，一种是采用Google的站内搜索，另一种是使用静态搜索引擎；</p>
<ul>
<li>
<p>Google站内搜索
由于Bootstrap支持Tipue Search，故没怎么折腾Google站内搜索，参考：<a href="http://guozhongxin.com/pages/2014/09/25/build_blog_with_pelican.html">pelican建站攻略补充（站内搜索，和标签云）</a></p>
</li>
<li>
<p>Tipue Search静态搜索引擎
原理就是每次生成静态网站的时候，同时会生成一个JSON格式的索引文件，前端加载一个检索入口即可搜索网站内容，比较适合中小型的静态网站；</p>
</li>
</ul>
<div class="highlight"><pre>PLUGINS = [u"tipue_search"]

Tipue Search
DIRECT_TEMPLATES = (('index', 'tags', 'categories', 'archives', 'search',))
SEARCH_URL = '/search'
</pre></div>
<p><strong>Tips:</strong></p>
<p>从pelican-plugins下git下来的Tipue Search有bug，搜索出来的URL会显示undefined，参考<a href="https://github.com/DandyDev/pelican-bootstrap3/issues/220">此处</a>，将Tipue_Search更新至5.0即可，具体更新的方法参考<a href="http://www.futurile.net/2014/04/19/sitesearch-for-pelican-blog-with-tipue/">Site search with Tipue for Pelican</a>，要注意查看template/search.html中的路径；</p>
<h3 id="mcong-wordpressqian-yi-dao-pelican">m.从WordPress迁移到Pelican</h3>
<ol>
<li>导出WordPress数据；在 WordPress 后台 -&gt; 工具 -&gt; 导出。即可导出并下载包含全部文章、页面、评论、自定义栏目、分类目录和标签的 xml 文件。</li>
<li>将xml转成Markdown；使用 <a href="https://github.com/yourtion/exitwp">exitwp</a> 自动处理xml文件。下载后将导出的 xml 放入 wordpress-xml 目录中，运行 python exitwp.py 即可将 xml 转成 Markdown。 </li>
<li>需要注意的是转换出的文件注释部分，关于Tags，Category，Date等Meta部分需要按Pelican的形式进行格式调整，以便被Pelican解析，其实还是有点工作量的...</li>
</ol>
<p>看文档发现，有pelican-import可以直接从wordpress导入，<a href="http://docs.getpelican.com/en/3.6.3/importer.html">参考</a></p>
<h3 id="nurlpei-zhi">n.URL配置</h3>
<p>默认的URL太low了，可以更优雅...但要注意修改后本地图片的相对路径需要该.</p>
<p>打开pelicanconf.py配置文件，添加如下，具体配置请参见<a href="http://docs.getpelican.com/en/3.6.3/settings.html#url-settings">官方文档</a>。</p>
<div class="highlight"><pre>ARTICLE_URL = 'pages/{date:%Y}/{date:%m}/{date:%d}/{slug}/'
ARTICLE_SAVE_AS = 'pages/{date:%Y}/{date:%m}/{date:%d}/{slug}/index.html'
PAGE_URL = 'pages/{slug}/'
PAGE_SAVE_AS = 'pages/{slug}/index.html'
</pre></div>
<h3 id="ogeng-huan-zi-ti">o.更换字体</h3>
<p>Pelican默认的字体使用了Google的字体服务，会导致加载速度巨慢，更改国内的源或将字体文件放到github上</p>
<div class="highlight"><pre><span class="c">#static/css/目录下css文件中,例如gumby.css</span>
<span class="nd">@import</span> <span class="n">url</span><span class="p">(</span><span class="o">//</span><span class="n">fonts</span><span class="o">.</span><span class="n">googleapi</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">css</span><span class="err">?</span><span class="n">family</span><span class="o">=</span><span class="n">Open</span><span class="o">+</span><span class="n">Sans</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">700</span><span class="p">);</span>
<span class="c">#替换为</span>
<span class="nd">@import</span> <span class="n">url</span><span class="p">(</span><span class="o">//</span><span class="n">fonts</span><span class="o">.</span><span class="n">useso</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">css</span><span class="err">?</span><span class="n">family</span><span class="o">=</span><span class="n">Open</span><span class="o">+</span><span class="n">Sans</span><span class="p">:</span><span class="mi">400</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">700</span><span class="p">);</span>
</pre></div>
<blockquote>
<ul>
<li>如何创建github-page、git使用就不介绍了...</li>
<li>之后的折腾就都来自Pelican docs</li>
<li><a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3">Bootstrap3</a>很值得看，里面介绍了模板支持的功能</li>
<li><a href="https://github.com/pelucky/pelucky.github.io">Blog Source code</a></li>
<li>感谢林无知的Nono熊</li>
</ul>
</blockquote>
<hr/>
<h1 id="reference_2">Reference</h1>
<ul>
<li><a href="http://docs.getpelican.com/en/3.6.3/">Pelican docs</a></li>
<li><a href="https://pages.github.com/">GitPages</a></li>
<li><a href="http://blog.kamidox.com/build-blog-system-by-pelican.html">使用Pelican搭建博客系统</a></li>
<li><a href="http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html">使用Pelican + Github Pages搭建个人博客</a></li>
<li><a href="http://www.lizherui.com/pages/2013/08/17/build_blog.html">一步一步打造Geek风格的技术博客</a></li>
<li><a href="http://hateonion.me/Wordpress-to-Pelican-github-Pages.html">教你将博客从WordPress迁移到Pelican</a></li>
<li><a href="http://www.hao-jiang.com/pages/web-development/blogbuilding">Pelican＋Github博客搭建及快速进阶</a></li>
</ul>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://pelucky.github.io/pages/2016/03/31/git-talk/">Git Talk</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'pelucky'; // required: replace example with your forum shortname

                    var disqus_identifier = 'gitpages-pelican';
                var disqus_url = 'https://pelucky.github.io/pages/2016/03/22/gitpages-pelican/';

            var disqus_config = function () {
                this.language = "zh";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><a href="https://pelucky.github.io/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/categories/life.html">
                            <i class="fa fa-folder-open fa-lg"></i> Life
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/categories/network.html">
                            <i class="fa fa-folder-open fa-lg"></i> Network
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/categories/system.html">
                            <i class="fa fa-folder-open fa-lg"></i> System
                        </a>
                    </li>
                </ul>
            </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/pages/2016/03/31/git-talk/">
                            Git Talk
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/pages/2016/03/22/gitpages-pelican/">
                            Pelican札记
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://pelucky.github.io/pages/2016/01/13/hello-world/">
                            Hello world
                        </a>
                    </li>
                </ul>
            </li>

            <li class="list-group-item"><a href="https://pelucky.github.io/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-1">
                        <a href="https://pelucky.github.io/tag/bitnami.html">
                            bitnami
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://pelucky.github.io/tag/dokuwiki.html">
                            dokuwiki
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://pelucky.github.io/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://pelucky.github.io/tag/pelican.html">
                            pelican
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://pelucky.github.io/tag/setup.html">
                            setup
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://pelucky.github.io/tag/snmp.html">
                            snmp
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://pelucky.github.io/tag/switch.html">
                            switch
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://pelucky.github.io/tag/update-http-source.html">
                            update http source
                        </a>
                    </li>
                </ul>
            </li>

    <li class="list-group-item"><h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
        <div id="gh_repos">
            <p class="list-group-item">Status updating...</p>
        </div>
            <a href="https://github.com/pelucky">@pelucky</a> on GitHub
    </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/pelucky"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
                <li class="list-group-item"><a href="https://twitter.com/pelucky1412"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
                <li class="list-group-item"><a href="https://www.facebook.com/profile.php?id=100011137096595"><i class="fa fa-facebook-square fa-lg"></i> Facebook</a></li>
                <li class="list-group-item"><a href="https://plus.google.com/u/0/105742713362431137918"><i class="fa fa-google-plus-square fa-lg"></i> Google+</a></li>
              </ul>
            </li>

    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://choidi.github.io" target="_blank">
                Choidi's Blog
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://www.crackerben.com/new/" target="_blank">
                Crackerben
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://www.put.im/" target="_blank">
                Jonathan
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2016 pelucky
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://pelucky.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://pelucky.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://pelucky.github.io/theme/js/respond.min.js"></script>

    <!-- GitHub JS -->
    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = 'https://pelucky.github.io/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'pelucky',
                count: 3,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="https://pelucky.github.io/theme/js/github.js" type="text/javascript"></script>
    <!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'pelucky'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-75381100-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>