<!DOCTYPE html>
<html lang="zh">
<head>

        <title>Pelican札记</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/">pelucky's blog <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/">Home</a></li>


              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/gitpages-pelican.html" rel="bookmark"
                   title="Permalink to Pelican札记">Pelican札记</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2016-03-22T10:13:00+08:00">
                Tue 22 March 2016
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/author/pel.html"> pel</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <hr />
<p>这篇主要是总结下折腾<strong>个人博客</strong>的思路，前人已经刷了无数攻略，这个副本并不难，只是需要花时间。遇到问题时，Google始终是你最好的老师...</p>
<h2>Requirement</h2>
<ul>
<li>搭建简单，维护备份方便</li>
<li>写博客方便，支持MD格式</li>
<li>模板美观大方，可以装B，不会丑的狗带</li>
<li>社区活跃，遇到问题可以抱大神大腿</li>
</ul>
<h2>Solution</h2>
<p>主要是三大类解决方案：</p>
<p>a. 商业化产品
 - Lofter
 - CSDN
b. 个人博客（CMS）
 - Wordpress
 - Durpal
c. 静态页面
 - Pelican
 - jekyll
 - Ortopress</p>
<blockquote>
<ul>
<li>商业化产品首先不考虑，服务受提供商制约，用户体验有待提高，备份也很头疼，且没有折腾的意义...</li>
<li>使用过Wordpress，需要数据库等后面一套，略庞大，肯定需要独立空间，我懒...</li>
</ul>
</blockquote>
<p>自从<a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html">搭建一个免费的，无限流量的Blog----github Pages和Jekyll入门</a>之后，国内的个人博客就如雨后春笋，资料大把，原理类似...</p>
<p><a href="https://staticsitegenerators.net/">Static Site Generators</a>记录了github中各个开源的静态网站生成器star的情况，排名前五的是jekyll(Ruby)、Octopress(Ruby)、Hexo(Javascript)、Hugo(Go)、Pelican(Python)</p>
<ul>
<li>Jekyll
Jekyll在Github上有20000+stars，远远领先于第二名的关注度，笔者没用过ruby，且国内ruby源被GFWfuck后，设置淘宝源蛋疼...遂放弃</li>
<li>Ortopress同理，但是看到别人做的效果挺好的就关注了下：<a href="http://sonnewilling.com/">陋室</a></li>
</ul>
<h2>Pelican</h2>
<p>笔者使用Python，并且之前接触过Pelican，考虑了一下就选择了最熟悉的Pelican。</p>
<h3>1.Introduce</h3>
<ul>
<li>pelican是一个用python生成的静态站点生成器。具有以下特点：</li>
<li>支持Markdown和reStructuredText格式；</li>
<li>可以使用简单的命令生成文件；</li>
<li>具有简单易用的版本控制系统；</li>
<li>完全静态，可在任何地方输出；</li>
</ul>
<h3>2.Setup</h3>
<p>安装pelican</p>
<div class="highlight"><pre>pip install pelican Markdown
</pre></div>


<p>如有印刷格式上的需要，还需要安装typogrify</p>
<div class="highlight"><pre>pip install typogrify
</pre></div>


<h3>3.Usage</h3>
<ul>
<li>pelican-quickstart创建站点到/var/www/pelican/，根据脚本提示配置参数</li>
</ul>
<h4>站点结构</h4>
<div class="highlight"><pre>yourproject/
├── content
│   └── (pages)
├── output
├── develop_server.sh
├── fabfile.py
├── Makefile
├── pelicanconf.py       # Main settings file
└── publishconf.py       # Settings to use when ready to publish
</pre></div>


<h4>文档内容</h4>
<ul>
<li>pelican支持三种格式：reStructuredText、markdown以及AsciiDoc</li>
</ul>
<p>reStructuredText要求文件后缀为.rst，并且源文件格式如下：</p>
<div class="highlight"><pre>My super title
##############

:date: 2010-10-03 10:20
:modified: 2010-10-04 18:40
:tags: thats, awesome
:category: yeah
:slug: my-super-post
:authors: Alexis Metaireau, Conan Doyle
:summary: Short version for index and feeds

This is the content of my super blog post.
</pre></div>


<p>Markdown要求文件后缀为.md, .markdown, .mkd, 或 .mdown，并且源文件格式如下：</p>
<div class="highlight"><pre><span class="n">Title</span><span class="o">:</span> <span class="n">My</span> <span class="kd">super</span> <span class="n">title</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">03</span> <span class="mi">10</span><span class="o">:</span><span class="mi">20</span>
<span class="n">Modified</span><span class="o">:</span> <span class="mi">2010</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span> <span class="mi">19</span><span class="o">:</span><span class="mi">30</span>
<span class="n">Category</span><span class="o">:</span> <span class="n">Python</span>
<span class="n">Tags</span><span class="o">:</span> <span class="n">pelican</span><span class="o">,</span> <span class="n">publishing</span>
<span class="n">Slug</span><span class="o">:</span> <span class="n">my</span><span class="o">-</span><span class="kd">super</span><span class="o">-</span><span class="n">post</span>
<span class="n">Authors</span><span class="o">:</span> <span class="n">Alexis</span> <span class="n">Metaireau</span><span class="o">,</span> <span class="n">Conan</span> <span class="n">Doyle</span>
<span class="n">Summary</span><span class="o">:</span> <span class="n">Short</span> <span class="n">version</span> <span class="k">for</span> <span class="n">index</span> <span class="n">and</span> <span class="n">feeds</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">my</span> <span class="kd">super</span> <span class="n">blog</span> <span class="n">post</span><span class="o">.</span>
</pre></div>


<p>还支持翻译、语法高亮、内置内容（模板）、从其他站点导入等功能；</p>
<h4>输出和启动</h4>
<ul>
<li>编辑好Markdown或reStructuredText文件后，pelican会将内容转换为静态html格式，输出到output中</li>
</ul>
<div class="highlight"><pre>pelican /path/to/your/content/ [-s path/to/your/settings.py]
</pre></div>


<ul>
<li>启动服务器</li>
</ul>
<div class="highlight"><pre>cd output
python -m SimpleHTTPServer      #python2
python -m http.server           #python3
</pre></div>


<ul>
<li>打开浏览器http://192.168.1.112:8000/，预览效果；</li>
</ul>
<h4>配置主题</h4>
<p>Pelican支持大量的开源主题，GitHub上的pelican-themes项目有几十套主题，大部分都带了效果预览图。可以从里面挑一个你喜欢的主题样式来使用。还有一个更方便的挑选主题的方式，直接打开www.pelicanthemes.com挑选吧（加载略慢）。一个网页里就列出了几乎所有的主题。我的博客是使用Gum主题，并在这套主题的基础上进行了一些定制。选定好喜欢的主题后，从GitHub上下载下来所有的主题，安装主题：</p>
<div class="highlight"><pre>mkdir pelican
cd pelican
git clone https://github.com/getpelican/pelican-themes.git
pelican-themes -i gum
</pre></div>


<p>然后在pelicanconf.py里通过下面代码指定博客主题：</p>
<div class="highlight"><pre>THEME = &#39;gum&#39;
</pre></div>


<p>通常的做法是，选中一个自己喜欢的主题后，会进行一些定制。Pelican使用Jinja2来配置主题。一个主题的典型结构如下：</p>
<div class="highlight"><pre>├── static
│   ├── css
│   └── images
└── templates
    ├── analytics.html      // 这是Google Analytics的代码
    ├── archives.html       // 这个是博客归档页面的模板
    ├── article.html        // 这个是博客正文的显示模板
    ├── base.html           //　这个是所有页面的父类模板，即所有页面都引用这个页面。比如网页导航栏啊之类的，都定义在这里
    ├── categories.html     //　所有博客文章的分类列表
    ├── category.html       // 某个博客分类的文章列表模板
    ├── index.html          // 主页
    ├── page.html           // 分页显示的模板
    ├── tag.html            // 某类标签下的文章列表
    └── tags.html           // 所有的标签列表页面模板
</pre></div>


<p>稍微有点Jinja的知识加上一些HTML和CSS的知识，就可以自己定义主题了。</p>
<h4>一键Github</h4>
<p>若要一键上传到Github，需要修改Makefile脚本两处地方：</p>
<div class="highlight"><pre><span class="nf">publish</span><span class="o">:</span>
<span class="k">$(</span><span class="nv">PELICAN</span><span class="k">)</span> <span class="k">$(</span><span class="nv">INPUTDIR</span><span class="k">)</span> <span class="err">-o</span> <span class="k">$(</span><span class="nv">OUTPUTDIR</span><span class="k">)</span> <span class="err">-s</span> <span class="k">$(</span><span class="nv">CONFFILE</span><span class="k">)</span> <span class="k">$(</span><span class="nv">PELICANOPTS</span><span class="k">)</span>

<span class="err">......</span>

<span class="nf">github</span><span class="o">:</span> <span class="n">publish</span>
<span class="err">cd</span> <span class="k">$(</span><span class="nv">OUTPUTDIR</span><span class="k">)</span> <span class="err">;</span> <span class="err">git</span> <span class="err">add</span> <span class="err">.</span> <span class="err">;</span>  <span class="err">git</span> <span class="err">commit</span> <span class="err">-am</span> <span class="s1">&#39;Update pages&#39;</span> <span class="err">;</span> <span class="err">git</span> <span class="err">push</span>
</pre></div>


<p>以后写完文章在Pelican目录下执行make github就可以一键部署了。</p>
<h4>评论系统</h4>
<p>在<a href="https://disqus.com/admin/signup">Disqus</a>上申请一个站点，记牢Shortname(不需要加后缀)，评论系统加载起来有点慢，国内也可以使用多说。 在pelicanconf.py添加</p>
<div class="highlight"><pre>DISQUS_SITENAME = &#39;Shortname&#39;
</pre></div>


<h4>Google Analytics</h4>
<p>待续...</p>
<h4>Google Webmaster</h4>
<p>待续...</p>
<h4>DNS</h4>
<p>待续...</p>
<h4>Google站内搜索</h4>
<p>待续...</p>
<h4>从WordPress迁移到Pelican</h4>
<ol>
<li>导出WordPress数据；在 WordPress 后台 -&gt; 工具 -&gt; 导出。即可导出并下载包含全部文章、页面、评论、自定义栏目、分类目录和标签的 xml 文件。</li>
<li>将xml转成Markdown；使用 <a href="https://github.com/yourtion/exitwp">exitwp</a> 自动处理xml文件。下载后将导出的 xml 放入 wordpress-xml 目录中，运行 python exitwp.py 即可将 xml 转成 Markdown。 </li>
<li>需要注意的是转换出的文件注释部分，关于Tags，Category，Date等Meta部分需要按Pelican的形式进行格式调整，以便被Pelican解析，其实还是有点工作量的...</li>
</ol>
<blockquote>
<ul>
<li>如何创建github-page、git使用就不介绍了...</li>
<li>之后的折腾就都来自Pelican docs了</li>
</ul>
</blockquote>
<hr />
<h2>Reference</h2>
<ul>
<li><a href="http://docs.getpelican.com/en/3.6.3/">Pelican docs</a></li>
<li><a href="https://pages.github.com/">GitPages</a></li>
<li><a href="http://blog.kamidox.com/build-blog-system-by-pelican.html">使用Pelican搭建博客系统</a></li>
<li><a href="http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html">使用Pelican + Github Pages搭建个人博客</a></li>
<li><a href="http://www.lizherui.com/pages/2013/08/17/build_blog.html">一步一步打造Geek风格的技术博客</a></li>
<li><a href="http://hateonion.me/Wordpress-to-Pelican-github-Pages.html">教你将博客从WordPress迁移到Pelican</a></li>
</ul>
            </div><!-- /.entry-content -->
            <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "gitpages-pelican.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://pelucky.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>


        </div><!-- /.eleven.columns -->

<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul class="blank">
		<li><a href="/category/life.html">Life</a></li>
		<li><a href="/category/network.html">Network</a></li>
		<li><a href="/category/system.html">System</a></li>
</ul>


<h4>Tags</h4>
	<ul class="blank">
</ul>


<nav class="widget">
  <h4>Social</h4>
  <ul class="blank">
    <li><a href="http://choidi.github.io">Choidi's Blog</a></li>
    <li><a href="https://www.crackerben.com/new/">Crankerben</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


<script type="text/javascript">
    var disqus_shortname = 'pelucky';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>
</body>
</html>